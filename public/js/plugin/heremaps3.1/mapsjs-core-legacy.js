
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.12.0/HERE_NOTICE
 */

H.util.eval("function Wn(a,b){if(!a)throw new D(Wn,0,a);Wn.l.constructor.call(this,a);this.b={};this.c=b&&b.uc;this.f=Xn++}u(Wn,jm);var Xn=0;\nWn.prototype.X=function(a,b,c,d,e,f){var g=wd(d),h=this.ib,k=g+(c.exp-h.pixelProjection.exp),l=h.min,m=h.max;d=h.tileSize;var q=h.ma().j,p=this.Lb,r=p.Zc();var v=p.Gb().w;var w=c.w,z=c.x,I=c.y,G={};if(g<l||g>m)return jk.DONE;e=h.requestTiles(a,k,e,f,this.f);a=e.total;e=e.tiles;f=e.length;this.g=c;this.i=b;this.a=k;r!==q&&p.pc(q);c=d=d*w/(Cd(2,k)*d);this.c||(d%1&&(d=xd(d),w=c/d,z/=w,I/=w,w=Cd(2,k)*d),z=xd(z),I=xd(I));this.j=c;k=-d;g=v+d;for(h=0;h<f;h++){v=e[h];if((l=v.data)&&l.tagName){c=b.x-(z-v.x*\nd);q=b.y-(I-v.y*d);p.Wc(l,c,q,d,d);for(r=c;(r-=w)>k;)p.Wc(l,r,q,d,d);for(r=c;(r+=w)<g;)p.Wc(l,r,q,d,d)}G[this.a+\"_\"+v.x+\"_\"+v.y]=v}this.b=G;return f===a?jk.DONE:jk.PENDING};Wn.prototype.Ia=function(a,b,c){var d=this.j,e=d/this.ib.tileSize,f=this.g,g=this.i,h;if(sc(this.a)&&f){a=f.x+(a-g.x);b=f.y+(b-g.y);var k=xd(f.w/d);var l=f=xd(a/d);g=xd(b/d);zd(l)>=k&&(l%=k);0>l&&(l=k+l);(k=this.b[this.a+\"_\"+l+\"_\"+g])&&k.Ia&&(h=k.Ia((a-d*f)/e,(b-d*g)/e,c))}return h||ef};Wn.prototype.Td=function(){return\"2d\"};function Yn(a,b){b=b||{};C(a,kl,Yn,0);Yn.l.constructor.call(this,a);this.uc=!!b.uc;this.c=b.jb||0;this.a=[];this.b={}}u(Yn,jm);\nYn.prototype.X=function(a,b,c,d,e,f){var g,h=this.ib,k;d-=this.c;this.a.length=0;var l=this.b;this.b=g={};if(d>=h.min&&d<=h.max){var m=h.vd(a,d,e,f);var q=m.overlays;if(a=q.length)for(q.sort(Og),d=this.Lb,e=this.uc,f=0;f<a;f++){h=q[f];var p=h.G();var r=c.mb(p.Vb());var v=c.mb(p.Sb());p=c.w;r.x>=v.x&&(r.x-=p);p=-((r.x+v.x)/p>>1)*p;r.x+=p;r.add(b);v.x+=p;v.add(b);e||(r.round(),v.round());(p=l[k=h.gb()])?delete l[k]:p={Jn:h};g[k]=p;var w=r.x;r=r.y;var z=v.x;v=v.y;var I=z-w;var G=v-r;d.pc(h.Zc());d.Wc(h.Xc(),\nw,r,I,G);p.Vg?p.Vg.set(w,r,z,v):p.Vg=new lk(w,r,z,v);this.a.push(p)}}return!m||m.requested&&m.requested===m.total||!m.requested&&q.length===m.total?jk.DONE:jk.PENDING};Yn.prototype.Ia=function(a,b,c){for(var d=this.a,e=d.length,f,g,h;e--;)if(f=d[e],g=f.Vg,g.Cf(a,b))if(f=f.Jn,h)h.push(f);else if(h=[f],c)break;return h||ef};Yn.prototype.Td=function(){return\"2d\"};Yn.prototype.u=function(){this.a=null;Yn.l.u.call(this)};var Zn={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:sl.ZOOM,COORD:sl.COORD},capture:!0};t(\"H.map.render.p2d.capabilities\",Zn);function $n(a,b){this.a=[];$n.l.constructor.apply(this,arguments)}u($n,pm);n=$n.prototype;n.uj=function(){return this.ib.Ic.apply(this.ib,arguments)};n.X=function(a,b,c,d,e,f,g){this.a=[];return $n.l.X.apply(this,arguments)};n.Yj=1;n.Ak=function(a,b,c,d,e,f){var g=this.Yj=d.hb();e*=g;f*=g;var h=c.Gb();b=h.w*g;h=h.h*g;var k=c.ld();this.uc?(e-=k.x*g,f-=k.y*g):(e=wd(e-k.x*g),f=wd(f-k.y*g));d.Wc(c.Xc(),e,f,b,h);a.detail?a.detail.set(e,f,e+b,f+h):a.detail=new lk(e,f,e+b,f+h);this.a.push(a)};\nn.Ia=function(a,b,c){for(var d=this.a,e=d.length,f,g,h,k=ef,l=this.Yj;e--&&!(f=d[e],g=f.detail,g.Cf(a,b)&&(f=f.gk,(!(h=f.Eb().g)||h.Tf((a-g.left)/l,(b-g.top)/l,0))&&0>k.indexOf(f)&&(k===ef&&(k=[]),k.push(f),c))););return k};n.Td=function(){return\"2d\"};n.u=function(){this.a=null;$n.l.u.call(this)};function U(a,b,c,d){U.l.constructor.call(this,a,b,c,d);this.I=new H(0,0);if(c=d.renderBaseBackground)this.Cn=c.lower,this.nn=c.higher;this.ln=!!d.enableSubpixelRendering;this.Cd=ao;this.Ij=0;this.Kd=this.Jf=!1;this.m=new Ml;this.a=d=new $l;this.Dd=A(this.Dd,this);d.addEventListener(d.g.Bg,this.Dd);this.Ha=A(this.Ha,this);d=a.element;this.cb=a=d.ownerDocument.createElement(\"div\");a.style.position=\"absolute\";a.style.width=a.style.height=\"100%\";a.style.zIndex=0;d.insertBefore(a,d.firstChild);this.Lj=\nnew Bm(this.cb,this.oa);this.v=[];bo(this);this.Nh=A(U.prototype.Nh,this);this.A=co;this.bf();this.zoom=eo(this,this.K.ob()+this.jb);this.Ob();fo(this,b.tb().position,this.zoom);vl(this);this.ta()}u(U,ol);t(\"H.map.render.p2d.RenderEngine\",U);U.prototype.type=zl.P2D;U.prototype.type=U.prototype.type;var co=2;U.prototype.getState=function(){return this.A};U.prototype.getState=U.prototype.getState;function go(a,b,c){b=c-b;return zd(b)<a.b.w/2?b:b-a.b.w*c/zd(c)}\nU.prototype.Rg=function(a){var b=this,c=a.b,d=a.newValue,e=a.modifiers;a=d.position;var f=d.bounds,g,h=this.zoom,k=this.c,l=0;e&di.POSITION&&(g=b.b.mb(a));if(e&di.BOUNDS)d=ho(this,f.G(),e&di.ZOOM?d.zoom:B,e&di.POSITION?a:B),this.K.dc(d,c);else{e&di.POSITION||(g=b.b.mb(d.position));var m=g.x;var q=g.y;io(this);this.I.set(0,0);d=jo(this,d);var p=d.zoom;var r=d.position;if(c){var v=p-h;var w={x:k.x,y:k.y};c=this.b.bd(w).x;var z=this.b.projection.Rb(a);if(z.x!==this.c.x||z.y!==this.c.y||p!==this.zoom)m=\ngo(this,c,m),ko(this,function(I){var G=I-l;if(p!==h){g=b.b.bd(z);var W=b.b.bd(w);m=go(b,W.x,g.x);q=g.y-W.y}l=I;lo(b,m*G,q*G);h+=v*G;mo(b,h);vl(b);b.na()},this.zb,function(){fo(b,r,p);mo(b,p);vl(b,r);b.na()},this.Ab)}else no(this),fo(this,r,p),mo(this,p),vl(this,r);this.na()}};U.prototype.zb=300;U.prototype.ff=function(a){var b=Bc(a);if(!b||b&&0>a)throw new D(this.ff,1,\"positive number required\");this.zb=a};U.prototype.setAnimationDuration=U.prototype.ff;U.prototype.bh=function(){return this.zb};\nU.prototype.getAnimationDuration=U.prototype.bh;U.prototype.Ab=mm;U.prototype.gf=function(a){if(!Ba(a))throw new D(this.gf,1,\"function required\");this.Ab=a};U.prototype.setAnimationEase=U.prototype.gf;U.prototype.dh=function(){return this.Ab};U.prototype.getAnimationEase=U.prototype.dh;U.prototype.bf=function(){this.Ab=mm;this.zb=300};U.prototype.resetAnimationDefaults=U.prototype.bf;\nU.prototype.Zh=function(a,b,c){var d;this.bb=wk();(d=this.ca.ea.splice(a,1)[0])&&d.C&&d.C();(d=this.s.ea.splice(a,1)[0])&&d.C&&d.C();(d=this.ia.ea.splice(a,1)[0])&&d.C&&d.C();(d=this.S.ea.splice(a,1)[0])&&d.C&&d.C();this.g=this.f.Pa();0===a&&(tl(this,b,!1),this.Ob());this.v=Cm(this.Lj,oo(this),po(this));this.ee();c||this.na()};function bo(a){var b=a.f.Pa(),c=0,d=b.length;[a.ca={},a.s={},a.ia={},a.S={}].forEach(function(e){e.Vc=[];e.ea=[]});for(a.g=a.f.Pa();c<d;c++)a.Re(c,b[c]);a.Ob()}\nU.prototype.$h=function(){this.Ob();this.na()};U.prototype.xh=function(a,b,c){var d,e,f,g;if(b){var h={uc:this.ln,jb:this.jb};b.X?C(b,lm)?e=new km(b):C(b,zm)&&(g=new km(b)):(b.requestOverlays&&(d=new Yn(b,h)),b.requestTiles&&(e=new Wn(b,h)),b.requestMarkers&&(f=new $n(b,h)),b.requestDomMarkers&&(g=new sm(b,h)))}c=c||0;this.ca.ea.splice(a,c,d);this.s.ea.splice(a,c,e);this.ia.ea.splice(a,c,f);this.S.ea.splice(a,c,g);this.g=this.f.Pa();this.v=Cm(this.Lj,oo(this),po(this))};\nfunction po(a){var b=[];b=b.concat(a.s.ea);b=b.concat(a.ca.ea);b=b.concat(a.ia.ea);b=b.concat(a.S.ea);return b=b.filter(sc)}function jo(a,b){var c=ul(a,ul(a,b.zoom)+a.jb);a=wl(a,b);a.zoom=c;return a}function fo(a,b,c){var d=a.b;d.Fa(c);a.c=d.projection.Rb(b);d.x=d.w*a.c.x;d.y=d.h*a.c.y}U.prototype.Za=function(a,b){var c=this.i.center,d=this.oa;return this.b.Ta((a-c.x)*d,(b-c.y)*d)};U.prototype.screenToGeo=U.prototype.Za;U.prototype.qg=function(a,b){a=this.Za(a,b);b=this.K.tb();b.position=a;return b};\nU.prototype.Ha=function(a){var b=this.oa,c=this.i.center,d=c.x*b;c=c.y*b;a=this.b.mb(a);var e=this.b.w;return new H(wd((a.x-wd(a.x/e)*e+d)/b),wd((a.y+c)/b))};U.prototype.geoToScreen=U.prototype.Ha;U.prototype.G=function(a,b){var c=this.Mb[a||4];a=this.b;var d=c.left-b,e=a.Ta(d,c.top-b),f=c.right+b;b=a.Ta(f,c.bottom+b);f-d>=a.w&&(e.lng=-(b.lng=180));return cg(e,b)};\nU.prototype.Ia=function(a,b,c,d){var e=[],f=this.oa,g;a*=f;b*=f;f=[this.ca,this.s,this.ia,this.S];for(g=f.length;g--&&(!c||!e.length);){for(var h=e,k=f[g].ea,l=a,m=b,q=c,p=k.length;p--&&!((e=k[p])&&e.Ia&&(h=h.concat(e.Ia(l,m,q)),h.length&&q)););e=h}d(e)};U.prototype.getObjectsAt=U.prototype.Ia;U.prototype.gc=y;function oo(a){a=a.Mb[2];return{w:a.right-a.left,h:a.bottom-a.top}}\nU.prototype.ta=function(){var a=this.v.length,b;U.l.ta.call(this);var c=oo(this);this.I.set(0,0);var d=c.w;for(b=c.h;a--;){c=this.v[a];var e=c.Gb();e.w===d&&e.h===b||gm(c,d,b)}this.gc=new Wh(d,b);this.na()};U.prototype.getCapabilities=function(){return Zn};U.prototype.getCapabilities=U.prototype.getCapabilities;function qo(a){wk()-a.bb<a.Cd&&!a.D?a.Cg=Hk(a.Nh):(a.D&&(a.ee(),ro(a)),a.A=co)}n=U.prototype;n.ee=function(){this.ca.Vc.length=0;this.s.Vc.length=0;this.ia.Vc.length=0;this.S.Vc.length=0};\nn.Nh=function(){var a;this.F&&this.F.before();var b=this.s.ea;var c=this.i.center.clone().scale(this.oa).round();var d=this.G(1,0);var e=this.G(1,so);var f=this.zoom;var g=f-this.jb;var h=this.b;var k=this.Cn;var l=this.nn;var m=b[0];b=this.I;var q=this.v.length;var p=this.g;for(a=p.length;q--;){var r=this.v[q];C(r,im)&&r.clear()}if(m){if(k)for(;k;)q=f-k,m.X(d,c,h,q,!0,b),--k;if(l&&this.Kd)for(r=1;r<=l&&(q=f+r,h.Fa(q),k=this.G(2,0),h.Fa(f),!m.X(k,c,h,q,!0,b));r++);}for(this.Cd=ao;a--;)h=p[a],C(h,\nKi)&&h.ma()&&h.ma().ei(e,g);d=this.Xj(d,c,f,!1,b,to,this.s,this.ca);c=this.Xj(e,c,g,!1,b,uo,this.ia,this.S);this.D=d&&c;this.L||(this.L=this.K.tb());this.L.bounds=this.G(4,0);Nm(this.K,this.L);this.L=null;this.gc&&(nk(this.i,this.gc),this.gc=y);f<this.Ij?this.Kd=!0:this.Jf&&(this.Kd=!1);this.Ij=f;this.Jf=d;this.F&&this.F.after();qo(this)};\nn.Xj=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments,6),k=h.length,l=h[0].ea.length,m=k*l,q=!!m,p;for(p=0;p<m;p++){if(f===to){var r=p%k;var v=Math.floor(p/k)}else r=Math.floor(p/l),v=p%l;var w=h[r].ea[v];r=h[r].Vc;w&&(w=w.X(a,b,this.b,c,d,e,this.Ha),w===jk.ACTIVE&&(this.Cd=Infinity),w!==jk.DONE||r[v]||(ro(this,this.g[v]),r[v]=!0),r[v]||(q=!1))}return q};function ro(a,b){a.dispatchEvent({type:a.Vj.Zi,target:b||a})}\nn.u=function(){var a=this.f.Pa()[0],b=this.i;Ik(this.Cg);no(this,!0);a&&tl(this,a,!1);po(this).forEach(function(c){c.C()});b.element&&b.element.removeChild(this.cb);this.cb=null;this.A=3;U.l.u.call(this)};n.na=function(){this.bb=wk();this.A===co&&(this.D=!1,this.A=1,qo(this))};function vo(a,b,c){lo(a,b*a.oa,c*a.oa);a.I.set(0,0);vl(a);a.na()}function lo(a,b,c){var d=a.b;a=a.c;d.x=Vd(d.x+b,d.w);d.y=vd(0,ud(d.w,d.y+c));a.x=d.x/d.w;a.y=d.y/d.h}\nn.ie=function(a,b,c){a=ul(this,ul(this,a)+this.jb);mo(this,a,b,c)};U.prototype.zoomAt=U.prototype.ie;function mo(a,b,c,d){var e=a.oa,f=a.i.center;c===+c&&d===+d?(c=(c-f.x)*e,d=(d-f.y)*e,a.I.set(c,d),lo(a,c,d),a.b.Fa(b),lo(a,-c,-d)):(a.I.set(0,0),a.b.Fa(b));a.zoom=b;vl(a);a.na()}\nfunction ho(a,b,c,d){var e=a.getCapabilities().lookAt.zoom.max,f=b.nb(),g=d||f;if(b.Vf()||c&&d)c=c===B?e:c;else{var h=new ki(a.b.projection);h.Fa(e);var k=h.mb(b.Vb()).round();var l=h.mb(b.Sb()).round();e=h.w;b.Jb()&&(k.x-=e);d?(f=h.mb(g),b=2*vd(f.x-k.x,l.x-f.x),k=2*vd(f.y-k.y,l.y-f.y)):(b=l.x-k.x,k=l.y-k.y,g=f);c===B&&(f=a.Mb[4],c=f.right-f.left,f=f.bottom-f.top,c=-8+ud(Ad(c/b*e)/Kd,Ad(f/k*e)/Kd)-a.jb,c=ul(a,c))}return{zoom:xd(c),position:g}}\nfunction io(a){no(a,!0);a.a.Ka()&&a.Cb(!0);a.m.Ka()&&a.Db(!0);no(a,!0)}U.prototype.rc=function(a,b){io(this);wo(this,b);this.m.start(a,!!b)};U.prototype.startInteraction=U.prototype.rc;function wo(a,b){if(b){var c={};c.Ve=b.power;c.Id=b.ease;c.duration=b.duration;a.o=c}}function eo(a,b){return ul(a,ul(a,b-a.jb)+a.jb)}\nU.prototype.kc=function(a,b,c,d,e){var f=!1;this.m.Ka()&&(b=this.m.store(a,b,c,d,e),0<(this.m.b&sl.COORD)&&(a=Ol(this.m),0<Ll(a)&&(vo(this,-a.x,-a.y),f=!0)),b&&0<(this.m.b&sl.ZOOM)&&(a=Wl(this.m),b=Ql(this.m),b=Ad(Cd(2,this.zoom)*b)/Kd,b!==this.zoom&&(b=eo(this,b),mo(this,b,a.x,a.y),f=!0)),f&&this.na())};U.prototype.interaction=U.prototype.kc;\nU.prototype.Db=function(a){var b=this;if(this.m.Ka()&&!a){if(this.o){a=Vl(this.m);var c=Tl(this.m);var d=this.o.duration;var e=(this.o.Ve||1)*a;var f=new Am(-e/(0<d?d:1),e);!E(c.x)&&!E(c.y)&&0<e&&0<(b.m.b&sl.COORD)&&ko(this,function(g){e=f.Ee(g*d);E(e)||vo(b,wd(-c.x*e),wd(-c.y*e))},d,void 0,this.o.Id)}this.o=null;this.m.clear()}};U.prototype.endInteraction=U.prototype.Db;U.prototype.qc=function(a,b,c){io(this);this.a.start(b,c);wo(this,a)};U.prototype.startControl=U.prototype.qc;\nU.prototype.control=function(a,b,c){if(E(+c))throw new D(this.control,2,c);if(E(a))throw new D(this.control,0,a);if(E(b))throw new D(this.control,1,b);this.a.Ka()&&this.a.set(a,b,c,0,0,0)};U.prototype.control=U.prototype.control;\nU.prototype.Cb=function(a,b){var c=this,d;if(this.a.Ka()){no(this,!0);var e=wk();var f=e-this.ya;if(1<=f){var g=cm(this.a);xo(this,g,f)}if(!this.o||a||b)\"function\"===typeof b&&(a=this.tb(),a.zoom=this.zoom-this.jb,b(a),a.zoom+=this.jb,yo(this,a));else{b=em(cm(this.a));var h=dm(this.a);var k=this.o.duration;var l=(this.o.Ve||1)*b;var m=new Am(-l/(0<k?k:1),l);!E(h.vb)&&!E(h.wb)&&0<l&&ko(this,function(q,p,r,v){e&&(r=v-e,e=0);l=m.Ee(q*k)*r;E(l)||((d=h.xb*l)&&mo(c,eo(c,c.zoom+d),c.a.b,c.a.c),vo(c,wd(h.vb*\nl),wd(h.wb*l)))},k,void 0,this.o.Id)}this.a.reset()}};U.prototype.endControl=U.prototype.Cb;\nfunction yo(a,b){var c=a.c,d=a.b.projection.Rb(b.position),e=a.b.bd(d),f=e.y;e=e.x;var g=b.zoom;c=a.b.bd(c);b=c.y;var h=c.x;c=a.zoom;var k=em(cm(a.a)),l=a.a.b,m=a.a.c,q=0;e=go(a,h,e);e-=h;f-=b;c=g-c;b=Bd(e*e+f*f+c*c);if(0!==k&&0!==b){var p=e/b;var r=f/b;var v=c/b;var w=k*k/(2*b);ko(a,function(z,I){var G;if(1!==z){z=k*I-w*I*I/2;I=z-q;if(G=v*I)G=eo(a,a.zoom+G),mo(a,eo(a,G),l,m);vo(a,wd(p*I),wd(r*I));q=z}else a.c=d,mo(a,eo(a,g),l,m),vl(a),a.na()},2*b/k)}}\nU.prototype.Dd=function(a){var b=this,c=a.c;this.I.set(0,0);c.vb||c.wb||c.xb?(this.ya=wk(),ko(this,function(d,e,f,g){b.ya=g;xo(b,c,f)},Number.POSITIVE_INFINITY)):no(this,!0)};function xo(a,b,c){c=c||0;b.xb&&mo(a,eo(a,a.zoom+b.xb*c),a.a.atX,a.a.atY);vo(a,b.vb*c,b.wb*c)}function ko(a,b,c,d,e){a.j&&a.j.Ka()&&a.j.stop(!0);a.j=new nm(b,c,d,e);a.j.start()}function no(a,b){a.j&&a.j.Ka()&&a.j.stop(b)}U.prototype.Xg=function(){};U.prototype.enter=U.prototype.Xg;U.prototype.Hf=function(a){rl(this.cb,a)};\nU.prototype.exit=U.prototype.Hf;U.prototype.capture=function(a,b,c,d){var e=this.cb.ownerDocument.createElement(\"canvas\"),f=e.getContext(\"2d\"),g=this.oa;e.width=(c-a)*g;e.height=(d-b)*g;for(c=0;c<this.v.length;c++)d=this.v[c],C(d,im)&&f.drawImage(d.J(),-a*g,-b*g);return Wb(e)};var uo=0,to=1,ao=1E3,so=256;\n");